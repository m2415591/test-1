# Лаба 6 - Рефакторинг и code smells

## Code smells

* Функция process_checkout крайне длинна и сама по себе выполняет слишком много задач сразу. (Отсюда нарушение SRP)
* Магические числа (0.21, 0.10, и т.д.)
* Сложная логика расчета скидок (вложенные if-else)
* Дублирование: два цикла по items, повторяющиеся проверки полей
* Сложная читаемость

## Рефакторинги

* Разбивка функции process_checkout на
  - parse_request: парсинг входных данных
  - validate_request: валидация входных данных
  - calculate_subtotal: вычисление промежуточной суммы
  - calculate_discount: расчет скидки
  - calculate_tax: расчет налога
* Замена магических чисел на константы
* Замена вложенных if-else для улучшения потока
* Упрощение логики расчета скидок

## Результат

Что стало проще читать:

* Код легче читается
* каждая функция имеет одну задачу
* Логика расчета скидок за счет упрощения условных выражений

Что стало проще менять:

* Налоговую ставку
* Изменение правил валидации